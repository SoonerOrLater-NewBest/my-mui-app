<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>佛曲赏析</title>
		<link rel="stylesheet" type="text/css" href="../../common/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="../../common/common.css"/>
		<link rel="stylesheet" type="text/css" href="word.css"/>
		
	</head>
	<body style="background: #fff;">
		<div id="loader-wrapper">
			<div id="loader"></div>
		</div>	
		<div id="audio">
			<div class="wrap">
				<div style="" class="btn-audio">
					<audio src="../../source/ztfmz.mp3"></audio>
				</div>
				<span class="song-name">佛母准提咒</span>
			</div>
					
		</div>
	<script src="../../common/mui.min.js"></script>	
	<script src="../../common/jquery-2.1.0.js"></script>	
	<script type="text/javascript">
		function plusReady() {
		// 确保DOM解析完成
			var opener = plus.webview.currentWebview().opener();
			opener.addEventListener('hide',function(){
				$('.btn-audio').removeClass('rotateClass');
				$('audio').each(function(){
					this.pause();
				})
			})
		}
		if (window.plus) {
			plusReady();
		} 
		else {
			document.addEventListener("plusready", plusReady, false);
		}

	$(document).ready(function(){ 
              
        //播放器控制      
        $('.btn-audio').click(function() {
        	var $parent = $(this);
			var audio = $parent.find('audio')[0];
       		//播放完毕
       		$(audio).on('ended', function() {
            	console.log("音频已播放完成");
	            $parent.removeClass('rotateClass');
	        });
            event.stopPropagation();//防止冒泡
            if(audio.paused){ //如果当前是暂停状态
            	$('.btn-audio').removeClass('rotateClass');
            	$('audio').each(function(){
            		this.pause();
            	})
                $parent.addClass('rotateClass');
                audio.play(); //播放
                return;
            }else{//当前是播放状态
                $parent.removeClass('rotateClass');
                audio.pause(); //暂停''
            }
        });
        $('#loader').fadeOut(); 
	    $('#loader-wrapper').delay(350).fadeOut('slow'); 
	    $('body').delay(350).css({'overflow-y':'visible'});
    });
	</script>	
	</body>
</html>
